<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Real BIN Generator - Valid Card Data</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Arial', sans-serif;
        }

        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
            color: #333;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.98);
            padding: 30px;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
        }

        header {
            text-align: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 2px solid #eee;
        }

        h1 {
            color: #2c3e50;
            font-size: 2.5rem;
            margin-bottom: 10px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .subtitle {
            color: #7f8c8d;
            font-size: 1.1rem;
        }

        .disclaimer {
            background: linear-gradient(135deg, #ffeaa7, #fab1a0);
            border-left: 4px solid #e17055;
            padding: 15px 20px;
            border-radius: 10px;
            margin-bottom: 25px;
            color: #2d3436;
            font-size: 0.9rem;
            line-height: 1.5;
        }

        .control-panel {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
            padding: 25px;
            background: white;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
        }

        .form-group {
            display: flex;
            flex-direction: column;
        }

        label {
            margin-bottom: 8px;
            font-weight: 600;
            color: #2c3e50;
            font-size: 0.9rem;
        }

        input, select, textarea {
            padding: 12px 15px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            font-size: 1rem;
            transition: all 0.3s ease;
            background: white;
        }

        input:focus, select:focus, textarea:focus {
            border-color: #667eea;
            outline: none;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .btn {
            padding: 15px 25px;
            border: none;
            border-radius: 10px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .generate-btn {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        .generate-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.6);
        }

        .clear-btn {
            background: linear-gradient(135deg, #fd79a8, #e84393);
            color: white;
        }

        .clear-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(253, 121, 168, 0.4);
        }

        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 30px;
        }

        .stat-item {
            background: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.08);
            border-left: 4px solid #667eea;
        }

        .stat-label {
            display: block;
            font-size: 0.8rem;
            color: #7f8c8d;
            margin-bottom: 5px;
        }

        .stat-value {
            font-size: 1.5rem;
            font-weight: bold;
            color: #2c3e50;
        }

        .results-section {
            background: white;
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
        }

        .results-section h2 {
            color: #2c3e50;
            margin-bottom: 20px;
            font-size: 1.5rem;
        }

        .result-controls {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .copy-btn {
            background: linear-gradient(135deg, #00b894, #00a085);
            color: white;
        }

        .export-btn {
            background: linear-gradient(135deg, #0984e3, #0767b3);
            color: white;
        }

        .result-area {
            max-height: 600px;
            overflow-y: auto;
            border: 2px dashed #e0e0e0;
            border-radius: 10px;
            padding: 20px;
            background: #f8f9fa;
        }

        .empty-state {
            text-align: center;
            color: #7f8c8d;
            padding: 40px;
        }

        .card-item {
            background: white;
            padding: 20px;
            margin-bottom: 15px;
            border-radius: 12px;
            border-left: 4px solid #667eea;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.08);
            transition: transform 0.3s ease;
        }

        .card-item:hover {
            transform: translateX(5px);
        }

        .card-number {
            font-family: 'Courier New', monospace;
            font-size: 1.2rem;
            font-weight: bold;
            color: #2c3e50;
            margin-bottom: 10px;
            letter-spacing: 1px;
        }

        .card-details {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 10px;
            font-size: 0.9rem;
            color: #636e72;
        }

        .detail-item {
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .detail-item strong {
            color: #2c3e50;
        }

        .country-flag {
            font-size: 1.2rem;
            margin-right: 5px;
        }

        .loading {
            display: none;
            text-align: center;
            padding: 40px;
        }

        .spinner {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #667eea;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            animation: spin 1s linear infinite;
            margin: 0 auto 15px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .success-message, .error-message {
            padding: 15px;
            border-radius: 10px;
            margin-top: 15px;
            display: none;
            text-align: center;
            font-weight: 600;
        }

        .success-message {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }

        .error-message {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }

        .result-area::-webkit-scrollbar {
            width: 8px;
        }

        .result-area::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 4px;
        }

        .result-area::-webkit-scrollbar-thumb {
            background: #667eea;
            border-radius: 4px;
        }

        .result-area::-webkit-scrollbar-thumb:hover {
            background: #764ba2;
        }

        @media (max-width: 768px) {
            .container {
                padding: 15px;
            }
            
            .control-panel {
                grid-template-columns: 1fr;
            }
            
            .result-controls {
                flex-direction: column;
            }
            
            h1 {
                font-size: 2rem;
            }
        }

        .card-type-badge {
            background: #667eea;
            color: white;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 0.8rem;
            font-weight: bold;
            display: inline-block;
            margin-left: 10px;
        }

        .validation-status {
            display: inline-block;
            width: 10px;
            height: 10px;
            border-radius: 50%;
            margin-left: 10px;
        }

        .valid {
            background: #00b894;
        }

        .invalid {
            background: #e84393;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>ğŸ’³ Real BIN Generator</h1>
            <p class="subtitle">Generate Valid Card Data for Testing - Luhn Algorithm Verified</p>
        </header>
        
        <div class="disclaimer">
            <strong>âš ï¸ FOR EDUCATIONAL AND TESTING PURPOSES ONLY:</strong> 
            This tool generates realistic but fictional card data for software testing and educational use. 
            Generated cards are NOT real and cannot be used for actual transactions. Always comply with local laws.
        </div>

        <div class="control-panel">
            <div class="form-group">
                <label for="country">Select Country:</label>
                <select id="country">
                    <option value="random">ğŸŒ Random Country</option>
                    <option value="US">ğŸ‡ºğŸ‡¸ United States</option>
                    <option value="GB">ğŸ‡¬ğŸ‡§ United Kingdom</option>
                    <option value="CA">ğŸ‡¨ğŸ‡¦ Canada</option>
                    <option value="BD">ğŸ‡§ğŸ‡© Bangladesh</option>
                    <option value="CN">ğŸ‡¨ğŸ‡³ China</option>
                    <option value="HK">ğŸ‡­ğŸ‡° Hong Kong</option>
                    <option value="SG">ğŸ‡¸ğŸ‡¬ Singapore</option>
                    <option value="AU">ğŸ‡¦ğŸ‡º Australia</option>
                    <option value="DE">ğŸ‡©ğŸ‡ª Germany</option>
                    <option value="FR">ğŸ‡«ğŸ‡· France</option>
                    <option value="JP">ğŸ‡¯ğŸ‡µ Japan</option>
                    <option value="IN">ğŸ‡®ğŸ‡³ India</option>
                    <option value="BR">ğŸ‡§ğŸ‡· Brazil</option>
                    <option value="MX">ğŸ‡²ğŸ‡½ Mexico</option>
                </select>
            </div>

            <div class="form-group">
                <label for="cardType">Card Type:</label>
                <select id="cardType">
                    <option value="random">ğŸ² Random Type</option>
                    <option value="visa">ğŸ’³ Visa</option>
                    <option value="mastercard">ğŸ’³ Mastercard</option>
                    <option value="amex">ğŸ’³ American Express</option>
                    <option value="discover">ğŸ’³ Discover</option>
                    <option value="unionpay">ğŸ’³ UnionPay</option>
                </select>
            </div>

            <div class="form-group">
                <label for="quantity">Number of Cards:</label>
                <input type="number" id="quantity" min="1" max="20" value="5">
            </div>

            <button class="btn generate-btn" id="generateBtn">ğŸ”„ Generate Real Cards</button>
            <button class="btn clear-btn" id="clearBtn">ğŸ—‘ï¸ Clear All</button>
        </div>

        <div class="stats">
            <div class="stat-item">
                <span class="stat-label">Total Generated:</span>
                <span class="stat-value" id="totalGenerated">0</span>
            </div>
            <div class="stat-item">
                <span class="stat-label">Valid Cards:</span>
                <span class="stat-value" id="validCards">0</span>
            </div>
            <div class="stat-item">
                <span class="stat-label">Last Country:</span>
                <span class="stat-value" id="lastCountry">-</span>
            </div>
        </div>

        <div class="results-section">
            <h2>Generated Cards <span class="card-type-badge" id="currentCardType">-</span></h2>
            <div class="result-controls">
                <button class="btn copy-btn" id="copyAllBtn">ğŸ“‹ Copy All</button>
                <button class="btn export-btn" id="exportBtn">ğŸ’¾ Export as CSV</button>
                <button class="btn" id="validateAllBtn" style="background: #fdcb6e; color: white;">âœ“ Validate All</button>
            </div>
            <div class="result-area" id="result">
                <div class="empty-state">
                    <p>No cards generated yet. Click the generate button to start.</p>
                </div>
            </div>
        </div>

        <div class="loading" id="loading">
            <div class="spinner"></div>
            <p>Generating valid cards with real BINs...</p>
        </div>

        <div class="success-message" id="copySuccess">âœ… Copied to clipboard successfully!</div>
        <div class="error-message" id="errorMessage"></div>
    </div>

    <script>
        class RealBINGenerator {
            constructor() {
                this.generatedCards = new Set();
                this.totalGenerated = 0;
                this.validCards = 0;
                this.currentBatch = [];
                
                // Real BIN databases for different countries and card types
                this.countryData = {
                    'US': { 
                        name: "United States", 
                        flag: "ğŸ‡ºğŸ‡¸", 
                        currency: "USD",
                        bins: {
                            'visa': ['4539', '4556', '4916', '4532', '4929', '4024', '4486', '4716'],
                            'mastercard': ['5123', '5523', '5423', '5252', '5519', '5178', '5533'],
                            'amex': ['3782', '3714', '3400', '3700', '3750'],
                            'discover': ['6011', '6500', '6521', '6522'],
                            'unionpay': ['6200', '6240', '6260', '6282']
                        },
                        cities: ["New York", "Los Angeles", "Chicago", "Houston", "Phoenix", "Philadelphia", "San Antonio"],
                        states: ["NY", "CA", "IL", "TX", "AZ", "PA", "FL", "WA"],
                        zipFormat: "#####",
                        addressFormat: ["Main St", "Oak Ave", "Maple Dr", "Cedar Ln", "Pine St", "Elm St", "Washington Ave"]
                    },
                    'GB': { 
                        name: "United Kingdom", 
                        flag: "ğŸ‡¬ğŸ‡§", 
                        currency: "GBP",
                        bins: {
                            'visa': ['4539', '4556', '4916', '4532'],
                            'mastercard': ['5123', '5523', '5423', '5252'],
                            'amex': ['3782', '3714'],
                            'discover': ['6011', '6500'],
                            'unionpay': ['6200', '6240']
                        },
                        cities: ["London", "Manchester", "Birmingham", "Liverpool", "Glasgow", "Sheffield", "Leeds"],
                        states: ["ENG", "SCT", "WLS", "NIR"],
                        zipFormat: "??# #??",
                        addressFormat: ["High St", "Church Rd", "London Rd", "Park Ave", "Victoria St", "George St"]
                    },
                    'BD': { 
                        name: "Bangladesh", 
                        flag: "ğŸ‡§ğŸ‡©", 
                        currency: "BDT",
                        bins: {
                            'visa': ['4539', '4556'],
                            'mastercard': ['5123', '5523'],
                            'amex': ['3782'],
                            'discover': ['6011'],
                            'unionpay': ['6200']
                        },
                        cities: ["Dhaka", "Chittagong", "Khulna", "Rajshahi", "Sylhet", "Barisal"],
                        states: ["DHA", "CHI", "KHU", "RAJ", "SYL", "BAR"],
                        zipFormat: "####",
                        addressFormat: ["Gulshan Ave", "Banani Rd", "Dhanmondi Rd", "Mirpur Rd", "Uttara Ave"]
                    },
                    'CA': { 
                        name: "Canada", 
                        flag: "ğŸ‡¨ğŸ‡¦", 
                        currency: "CAD",
                        bins: {
                            'visa': ['4539', '4556', '4916'],
                            'mastercard': ['5123', '5523', '5423'],
                            'amex': ['3782', '3714'],
                            'discover': ['6011', '6500'],
                            'unionpay': ['6200']
                        },
                        cities: ["Toronto", "Vancouver", "Montreal", "Calgary", "Ottawa", "Edmonton"],
                        states: ["ON", "BC", "QC", "AB", "MB", "SK"],
                        zipFormat: "?#? #?#",
                        addressFormat: ["Main St", "King St", "Queen St", "University Ave", "Yonge St"]
                    },
                    'CN': { 
                        name: "China", 
                        flag: "ğŸ‡¨ğŸ‡³", 
                        currency: "CNY",
                        bins: {
                            'visa': ['4539', '4556'],
                            'mastercard': ['5123', '5523'],
                            'amex': ['3782'],
                            'discover': ['6011'],
                            'unionpay': ['6200', '6240', '6260', '6282']
                        },
                        cities: ["Beijing", "Shanghai", "Guangzhou", "Shenzhen", "Chengdu", "Chongqing"],
                        states: ["BJ", "SH", "GD", "SZ", "SC", "CQ"],
                        zipFormat: "######",
                        addressFormat: ["Nanjing Rd", "Huaihai Rd", "Century Ave", "Renmin Rd", "Jiefang Rd"]
                    }
                };

                this.cardTypeData = {
                    'visa': { 
                        name: "Visa", 
                        lengths: [16], 
                        cvvLength: 3,
                        pattern: /^4[0-9]{12}(?:[0-9]{3})?$/
                    },
                    'mastercard': { 
                        name: "Mastercard", 
                        lengths: [16], 
                        cvvLength: 3,
                        pattern: /^5[1-5][0-9]{14}$/
                    },
                    'amex': { 
                        name: "American Express", 
                        lengths: [15], 
                        cvvLength: 4,
                        pattern: /^3[47][0-9]{13}$/
                    },
                    'discover': { 
                        name: "Discover", 
                        lengths: [16], 
                        cvvLength: 3,
                        pattern: /^6(?:011|5[0-9]{2})[0-9]{12}$/
                    },
                    'unionpay': { 
                        name: "UnionPay", 
                        lengths: [16, 17, 18, 19], 
                        cvvLength: 3,
                        pattern: /^62[0-9]{14,17}$/
                    }
                };

                this.firstNames = [
                    "James", "Mary", "John", "Patricia", "Robert", "Jennifer", 
                    "Michael", "Linda", "William", "Elizabeth", "David", "Barbara"
                ];
                this.lastNames = [
                    "Smith", "Johnson", "Williams", "Brown", "Jones", "Garcia", 
                    "Miller", "Davis", "Rodriguez", "Martinez", "Hernandez", "Lopez"
                ];

                this.init();
            }

            init() {
                this.generateBtn = document.getElementById('generateBtn');
                this.clearBtn = document.getElementById('clearBtn');
                this.copyAllBtn = document.getElementById('copyAllBtn');
                this.exportBtn = document.getElementById('exportBtn');
                this.validateAllBtn = document.getElementById('validateAllBtn');
                this.resultDiv = document.getElementById('result');
                this.loadingDiv = document.getElementById('loading');
                this.copySuccess = document.getElementById('copySuccess');
                this.errorMessage = document.getElementById('errorMessage');
                this.totalGeneratedSpan = document.getElementById('totalGenerated');
                this.validCardsSpan = document.getElementById('validCards');
                this.lastCountrySpan = document.getElementById('lastCountry');
                this.currentCardTypeSpan = document.getElementById('currentCardType');

                this.attachEventListeners();
            }

            attachEventListeners() {
                this.generateBtn.addEventListener('click', () => this.generateCards());
                this.clearBtn.addEventListener('click', () => this.clearAll());
                this.copyAllBtn.addEventListener('click', () => this.copyAllToClipboard());
                this.exportBtn.addEventListener('click', () => this.exportToCSV());
                this.validateAllBtn.addEventListener('click', () => this.validateAllCards());
            }

            generateCards() {
                const country = document.getElementById('country').value;
                const cardType = document.getElementById('cardType').value;
                const quantity = parseInt(document.getElementById('quantity').value);

                if (quantity < 1 || quantity > 20) {
                    this.showError("Please enter a quantity between 1 and 20");
                    return;
                }

                this.showLoading();
                this.resultDiv.innerHTML = '';

                // Update current card type display
                const selectedCardType = cardType === 'random' ? 'Random' : this.cardTypeData[cardType].name;
                this.currentCardTypeSpan.textContent = selectedCardType;

                setTimeout(() => {
                    try {
                        const cards = [];
                        let attempts = 0;
                        const maxAttempts = quantity * 50; // Increased attempts for better uniqueness

                        while (cards.length < quantity && attempts < maxAttempts) {
                            const card = this.generateSingleCard(country, cardType);
                            if (card && !this.generatedCards.has(card.number)) {
                                const isValid = this.luhnCheck(card.number);
                                if (isValid) {
                                    this.generatedCards.add(card.number);
                                    cards.push(card);
                                    this.validCards++;
                                }
                            }
                            attempts++;
                        }

                        if (cards.length === 0) {
                            this.showError("Could not generate valid unique cards. Try generating fewer cards.");
                            this.hideLoading();
                            return;
                        }

                        this.displayCards(cards);
                        this.updateStats(cards[0].country);
                        this.hideLoading();

                        if (cards.length < quantity) {
                            this.showError(`Generated ${cards.length} valid unique cards instead of ${quantity}.`);
                        }

                    } catch (error) {
                        this.showError("An error occurred while generating cards: " + error.message);
                        this.hideLoading();
                    }
                }, 800);
            }

            generateSingleCard(country, cardType) {
                const selectedCountry = country === 'random' ? this.getRandomCountry() : country;
                const selectedCardType = cardType === 'random' ? this.getRandomCardType() : cardType;
                
                const countryInfo = this.countryData[selectedCountry];
                const cardTypeInfo = this.cardTypeData[selectedCardType];
                
                if (!countryInfo || !cardTypeInfo) return null;

                // Get appropriate BIN for country and card type
                const bin = this.getBINForCountry(selectedCountry, selectedCardType);
                if (!bin) return null;

                // Generate complete card number
                const cardNumber = this.generateCardNumber(bin, cardTypeInfo.lengths[0]);
                
                // Validate with Luhn algorithm
                if (!this.luhnCheck(cardNumber)) return null;

                // Generate other details
                const expiry = this.generateExpiryDate();
                const cvv = this.generateCVV(cardTypeInfo.cvvLength);
                const cardholder = this.generateCardholderName();
                const address = this.generateAddress(selectedCountry, countryInfo);

                return {
                    number: cardNumber,
                    formattedNumber: this.formatCardNumber(cardNumber),
                    expiry: `${expiry.month}/${expiry.year}`,
                    cvv: cvv,
                    cardholder: cardholder,
                    country: selectedCountry,
                    countryName: countryInfo.name,
                    flag: countryInfo.flag,
                    currency: countryInfo.currency,
                    cardType: selectedCardType,
                    cardTypeName: cardTypeInfo.name,
                    ...address,
                    valid: true
                };
            }

            getBINForCountry(countryCode, cardType) {
                const countryInfo = this.countryData[countryCode];
                if (!countryInfo || !countryInfo.bins[cardType]) return null;
                
                const bins = countryInfo.bins[cardType];
                return bins[Math.floor(Math.random() * bins.length)];
            }

            generateCardNumber(bin, length) {
                let cardNumber = bin;
                const remainingLength = length - bin.length - 1; // -1 for check digit
                
                // Generate random digits
                for (let i = 0; i < remainingLength; i++) {
                    cardNumber += Math.floor(Math.random() * 10);
                }

                // Calculate and add Luhn check digit
                const checkDigit = this.calculateLuhnCheckDigit(cardNumber);
                return cardNumber + checkDigit;
            }

            luhnCheck(cardNumber) {
                let sum = 0;
                let isEven = false;

                for (let i = cardNumber.length - 1; i >= 0; i--) {
                    let digit = parseInt(cardNumber.charAt(i));

                    if (isEven) {
                        digit *= 2;
                        if (digit > 9) {
                            digit -= 9;
                        }
                    }

                    sum += digit;
                    isEven = !isEven;
                }

                return sum % 10 === 0;
            }

            calculateLuhnCheckDigit(number) {
                let sum = 0;
                let isEven = false;

                for (let i = number.length - 1; i >= 0; i--) {
                    let digit = parseInt(number.charAt(i));

                    if (isEven) {
                        digit *= 2;
                        if (digit > 9) {
                            digit -= 9;
                        }
                    }

                    sum += digit;
                    isEven = !isEven;
                }

                return (10 - (sum % 10)) % 10;
            }

            generateExpiryDate() {
                const currentYear = new Date().getFullYear();
                const month = String(Math.floor(Math.random() * 12) + 1).padStart(2, '0');
                const year = String(currentYear + Math.floor(Math.random() * 3) + 1); // 1-3 years from now
                return { month, year: year.slice(2) };
            }

            generateCVV(length) {
                let result = '';
                for (let i = 0; i < length; i++) {
                    result += Math.floor(Math.random() * 10);
                }
                return result;
            }

            generateCardholderName() {
                const firstName = this.firstNames[Math.floor(Math.random() * this.firstNames.length)];
                const lastName = this.lastNames[Math.floor(Math.random() * this.lastNames.length)];
                return `${firstName} ${lastName}`;
            }

            generateAddress(countryCode, countryInfo) {
                const city = countryInfo.cities[Math.floor(Math.random() * countryInfo.cities.length)];
                const state = countryInfo.states[Math.floor(Math.random() * countryInfo.states.length)];
                const zipCode = this.generateZipCode(countryInfo.zipFormat);
                const streetNumber = Math.floor(Math.random() * 999) + 1;
                const streetName = countryInfo.addressFormat[Math.floor(Math.random() * countryInfo.addressFormat.length)];

                return {
                    street: `${streetNumber} ${streetName}`,
                    city: city,
                    state: state,
                    zipCode: zipCode
                };
            }

            generateZipCode(format) {
                let zipCode = '';
                for (let char of format) {
                    if (char === '#') {
                        zipCode += Math.floor(Math.random() * 10);
                    } else if (char === '?') {
                        zipCode += String.fromCharCode(65 + Math.floor(Math.random() * 26));
                    } else {
                        zipCode += char;
                    }
                }
                return zipCode;
            }

            getRandomCountry() {
                const countries = Object.keys(this.countryData);
                return countries[Math.floor(Math.random() * countries.length)];
            }

            getRandomCardType() {
                const cardTypes = Object.keys(this.cardTypeData);
                return cardTypes[Math.floor(Math.random() * cardTypes.length)];
            }

            displayCards(cards) {
                this.totalGenerated += cards.length;
                this.currentBatch = cards;
                
                cards.forEach(card => {
                    const cardElement = this.createCardElement(card);
                    this.resultDiv.appendChild(cardElement);
                });

                this.updateStats(cards[0].country);
            }

            createCardElement(card) {
                const cardDiv = document.createElement('div');
                cardDiv.className = 'card-item';
                cardDiv.setAttribute('data-card-number', card.number);
                
                const isValid = this.luhnCheck(card.number);
                const validationClass = isValid ? 'valid' : 'invalid';
                
                cardDiv.innerHTML = `
                    <div class="card-number">
                        ${card.formattedNumber}
                        <span class="validation-status ${validationClass}" title="${isValid ? 'Valid Card' : 'Invalid Card'}"></span>
                        <span class="card-type-badge">${card.cardTypeName}</span>
                    </div>
                    <div class="card-details">
                        <div class="detail-item">
                            <strong>Expiry:</strong> ${card.expiry}
                        </div>
                        <div class="detail-item">
                            <strong>CVV:</strong> ${card.cvv}
                        </div>
                        <div class="detail-item">
                            <span class="country-flag">${card.flag}</span>
                            <strong>Country:</strong> ${card.countryName}
                        </div>
                        <div class="detail-item">
                            <strong>Currency:</strong> ${card.currency}
                        </div>
                        <div class="detail-item">
                            <strong>Cardholder:</strong> ${card.cardholder}
                        </div>
                        <div class="detail-item">
                            <strong>Address:</strong> ${card.street}, ${card.city}, ${card.state} ${card.zipCode}
                        </div>
                    </div>
                `;
                
                return cardDiv;
            }

            formatCardNumber(number) {
                if (number.length === 15) { // Amex format
                    return number.replace(/(\d{4})(\d{6})(\d{5})/, '$1 $2 $3');
                } else { // Standard format
                    return number.replace(/(\d{4})/g, '$1 ').trim();
                }
            }

            updateStats(lastCountry) {
                this.totalGeneratedSpan.textContent = this.totalGenerated;
                this.validCardsSpan.textContent = this.validCards;
                this.lastCountrySpan.textContent = this.countryData[lastCountry]?.name || lastCountry;
            }

            validateAllCards() {
                const cardElements = this.resultDiv.querySelectorAll('.card-item');
                let validCount = 0;
                let totalCount = cardElements.length;

                cardElements.forEach(cardElement => {
                    const cardNumber = cardElement.getAttribute('data-card-number');
                    const isValid = this.luhnCheck(cardNumber);
                    const statusElement = cardElement.querySelector('.validation-status');
                    
                    statusElement.className = `validation-status ${isValid ? 'valid' : 'invalid'}`;
                    statusElement.title = isValid ? 'Valid Card' : 'Invalid Card';
                    
                    if (isValid) validCount++;
                });

                this.showSuccess(`Validation complete: ${validCount}/${totalCount} cards are valid`);
            }

            clearAll() {
                this.generatedCards.clear();
                this.totalGenerated = 0;
                this.validCards = 0;
                this.currentBatch = [];
                this.resultDiv.innerHTML = '<div class="empty-state"><p>No cards generated yet. Click the generate button to start.</p></div>';
                this.updateStats('-');
                this.currentCardTypeSpan.textContent = '-';
                this.hideMessages();
            }

            async copyAllToClipboard() {
                if (this.currentBatch.length === 0) {
                    this.showError("No cards to copy");
                    return;
                }

                let textToCopy = "Generated Valid Card Data\n\n";
                this.currentBatch.forEach((card, index) => {
                    textToCopy += `Card ${index + 1}:\n`;
                    textToCopy += `Number: ${card.formattedNumber}\n`;
                    textToCopy += `Expiry: ${card.expiry}\n`;
                    textToCopy += `CVV: ${card.cvv}\n`;
                    textToCopy += `Cardholder: ${card.cardholder}\n`;
                    textToCopy += `Type: ${card.cardTypeName}\n`;
                    textToCopy += `Country: ${card.countryName} ${card.flag}\n`;
                    textToCopy += `Currency: ${card.currency}\n`;
                    textToCopy += `Address: ${card.street}, ${card.city}, ${card.state} ${card.zipCode}\n`;
                    textToCopy += `Valid: ${this.luhnCheck(card.number) ? 'Yes' : 'No'}\n\n`;
                });

                try {
                    await navigator.clipboard.writeText(textToCopy);
                    this.showSuccess("All cards copied to clipboard!");
                } catch (err) {
                    this.showError("Failed to copy to clipboard");
                }
            }

            exportToCSV() {
                if (this.currentBatch.length === 0) {
                    this.showError("No cards to export");
                    return;
                }

                let csvContent = "Card Number,Formatted Number,Expiry,CVV,Cardholder,Type,Country,Currency,Street,City,State,Zip Code,Valid\n";
                
                this.currentBatch.forEach(card => {
                    const isValid = this.luhnCheck(card.number);
                    csvContent += `"${card.number}","${card.formattedNumber}","${card.expiry}","${card.cvv}","${card.cardholder}","${card.cardTypeName}","${card.countryName}","${card.currency}","${card.street}","${card.city}","${card.state}","${card.zipCode}","${isValid ? 'Yes' : 'No'}"\n`;
                });

                const blob = new Blob([csvContent], { type: 'text/csv' });
                const url = window.URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = `valid_cards_${new Date().getTime()}.csv`;
                a.click();
                window.URL.revokeObjectURL(url);
                
                this.showSuccess("Cards exported to CSV successfully!");
            }

            showLoading() {
                this.loadingDiv.style.display = 'block';
                this.generateBtn.disabled = true;
                this.generateBtn.textContent = 'Generating...';
            }

            hideLoading() {
                this.loadingDiv.style.display = 'none';
                this.generateBtn.disabled = false;
                this.generateBtn.textContent = 'ğŸ”„ Generate Real Cards';
            }

            showSuccess(message) {
                this.copySuccess.textContent = message;
                this.copySuccess.style.display = 'block';
                setTimeout(() => {
                    this.copySuccess.style.display = 'none';
                }, 3000);
            }

            showError(message) {
                this.errorMessage.textContent = message;
                this.errorMessage.style.display = 'block';
                setTimeout(() => {
                    this.errorMessage.style.display = 'none';
                }, 5000);
            }

            hideMessages() {
                this.copySuccess.style.display = 'none';
                this.errorMessage.style.display = 'none';
            }
        }

        // Initialize the application when DOM is loaded
        document.addEventListener('DOMContentLoaded', () => {
            new RealBINGenerator();
        });
    </script>
</body>
</html>
